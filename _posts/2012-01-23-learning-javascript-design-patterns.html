---
layout: post
title:  Learning JavaScript Design Patterns
snip:   —Collection the design patterns in my code life.
---

<dl>
	<dt>OO基础: </dt>
	<dd>抽象 封装 多态 继承</dd>
</dl>

<dl>
<dt>OO原则: </dt>
<dd>封装变化</dd>
<dd>多用组合, 少用继承</dd>
<dd>针对接口编程, 不针对实现编程</dd>
<dd>为交互对象之间的松耦合设计而努力</dd>
<dd>对扩展开放, 对修改关闭</dd>
</dl>

<div id="table-of-contents">
	<h2>Table of Contents</h2>
	<div id="text-table-of-contents">
		<ul>
			<li><a href="#sec-1">1. Strategy</a></li>
			<li><a href="#sec-2">2. Observer</a></li>
			<li><a href="#sec-3">3. Decorator</a></li>
			<li><a href="#sec-4">4. Proxy</a></li>
			<li><a href="#sec-5">5. Facade</a></li>
			<li><a href="#sec-6">6. Mediator</a></li>
			<li><a href="#sec-7">7. Mixins</a></li>
		</ul>
	</div>
</div>

<div id="outline-container-1" class="outline-2">
	<h2 id="sec-1">1. Strategy </h2>
	<div class="outline-text-2" id="text-1">
		<p>
		Strategy.
		</p>
	</div>
</div>

<div id="outline-container-2" class="outline-2">
	<h2 id="sec-2">2. Observer </h2>
	<div class="outline-text-2" id="text-2">
		<p>
		Observer.
		</p>
	</div>
</div>

<div id="outline-container-3" class="outline-2">
	<h2 id="sec-3">3. Decorator </h2>
	<div class="outline-text-2" id="text-3">
		<p>
		Decorator. 动态地将责任附加到对象上. 若要扩展功能, 装饰者提供了比继承更有弹性的替代方案.
		</p>
		<p>
		比继承更为弹性的设计, 避免滥用继承; 对扩展开放, 对修改关闭; 
		</p>
		<p>
		装饰者会导致设计中出现许多小对象, 如果过度使用, 会使程序变得很复杂.
		</p>
<pre><code>// Superclass
var Espresso = function() {…};
 
// Subclasses with different features
var EspressoWithSteamedMilk = function() {…};
var EspressoWithSoy = function() {…};
var EspressoWithMocha = function() {…};
var EspressoWithSteamedMilkandSoy = function() {…};
var EspressoWithSteamedMilkandMocha = function() {…};
var EspressoWithSoyandMocha = function() {…};
…
</code></pre>
		<p>应用Decorator模式我们可以这样写：</p>
<pre><code>//The class we're going to decorate
function Espresso(){
	this.cost = function(){
		return 20;
	};
}

function SteamedMilk(espresso){
	this.cost = function(){
		return espresso.cost() + 5;
	};
}
function Soy(espresso){
	this.cost = function(){
		return espresso.cost() + 3;
	};
}
function Mocha(espresso){
	this.cost = function(){
		return espresso.cost() + 6;
	};
}
 
// Sample usage
var myEspresso = new Mocha(new Soy(new SteamedMilk(new Espresso())));
console.log( myEspresso.cost() );
</code></pre>
		<p>继续改造一下：</p>
<pre><code>// Basic Class
var Espresso = function(){};
Espresso.prototype = {
	cost : function(){
		return 20;
	}
};

// Decorator
var EspressoDecorator = function(espresso) {
	this.espresso = espresso;
};
EspressoDecorator.prototype = {
	cost : function(){
		return this.espresso.cost();
	}
};

var SteamedMilkDecorator = function(espresso){
	EspressoDecorator.call(this, espresso);
};
SteamedMilkDecorator.prototype = new EspressoDecorator();
SteamedMilkDecorator.prototype.cost = function(){
	return this.espresso.cost() + 5;
}

var SoyDecorator = function(espresso){
	EspressoDecorator.call(this, espresso);
};
SoyDecorator.prototype = new EspressoDecorator();
SoyDecorator.prototype.cost = function(){
	return this.espresso.cost() + 3;
}

var MochaDecorator = function(espresso){
	EspressoDecorator.call(this, espresso);
};
MochaDecorator.prototype = new EspressoDecorator();
MochaDecorator.prototype.cost = function(){
	return this.espresso.cost() + 6;
}
 
// Sample usage
var espresso = new Espresso();
 
// give the espresso some decorators
espresso = new SteamedMilkDecorator(espresso);
espresso = new SoyDecorator(espresso);
espresso = new MochaDecorator(espresso);
 
// let's calculate the cost
espresso.cost(); //34
</code></pre>
	</div>
</div>

<div id="outline-container-4" class="outline-2">
	<h2 id="sec-4">4. Proxy </h2>
	<div class="outline-text-2" id="text-4">
		<p>
		Proxy.
		</p>
	</div>
</div>

<div id="outline-container-5" class="outline-2">
	<h2 id="sec-5">5. Facade </h2>
	<div class="outline-text-2" id="text-5">
		<p>
		Facade.
		</p>
	</div>
</div>

<div id="outline-container-6" class="outline-2">
	<h2 id="sec-6">6. Mediator </h2>
	<div class="outline-text-2" id="text-6">
		<p>
		Mediator.
		</p>
	</div>
</div>

<div id="outline-container-7" class="outline-2">
	<h2 id="sec-7">7. Mediator </h2>
	<div class="outline-text-2" id="text-7">
		<p>
		Mixins.
		</p>
<pre><code>
  
</code></pre>
	</div>
</div>

